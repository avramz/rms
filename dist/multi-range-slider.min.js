!function(t){"use strict";function e(e,i){function n(t){u.onDragEnd&&"function"==typeof u.onDragEnd&&u.onDragEnd(t,u)}function o(t){u.mode=t}function l(t){t.$label.text(Math.round(t.value)),u.normalizeSlides(t),u.onDrag&&"function"==typeof u.onDrag&&u.onDrag(t,u)}function h(e){var s=0;return t(e).find(d.rangeSelector).each(function(){var e=t(this).attr("data-rms-min")||0;t(this).attr("data-rms-max")||a("Plugin Error","Max value missing for slider element"+this),parseInt(t(this).attr("data-rms-max"))-e>s&&(s=parseInt(t(this).attr("data-rms-max"))-e)}),s}function r(){var e=0;t.each(u.sliders,function(t,s){s.isLocked&&(e+=Math.abs(s.getValue()-s.minValue))}),u.maxValue=u.initialMax-e,t.each(u.sliders,function(t,e){e.isLocked||(e.totalValue=e.minValue+u.maxValue)})}var u=this,d=t.extend({},t.fn.MultiRangeSlider.defaults,i),c={};this.maxValue=h(e),this.initialMax=this.maxValue,this.setMode=o,this.mode=">",t(e).find(d.rangeSelector).each(function(e){var a=t(this).attr("data-rms-name")||"slide-"+e;c[a]=new s(this,{id:a,value:parseFloat(t(this).attr("data-rms-value")),step:parseFloat(t(this).attr("data-rms-step")),minValue:parseFloat(t(this).attr("data-rms-min"))||0,maxValue:parseFloat(t(this).attr("data-rms-max")),totalValue:u.maxValue,disabledClass:d.disabledClass,fillClass:d.fillClass,rangeClass:d.rangeClass,handleClass:d.handleClass,lockClass:d.lockClass,useLock:d.useLock,onDrag:l,onDragEnd:n,onLock:r,sliders:c})}),this.sliders=c,this.onDrag=d.onDrag,this.onDragEnd=d.onDragEnd,this.onInit=d.onInit,this.onInit(u)}function s(e,s){function a(t){t=t||window.event;var e,s=t.pageX||t.touches[0].clientX,a=h.maxValue>h.totalValue?h.totalValue:h.maxValue;if(s||(s=!t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),e=Math.round((s-h.$range.offset().left)*h.maxValue/h.$range.outerWidth()),h.isDown){if(e>a)return void h.setValue(a);if(e<h.minValue)return void h.setValue(h.minValue);h.$handle.css("left",Math.round(s-h.$range.offset().left-h.$handle.outerWidth()/2)+"px"),h.$fill.css("width",s-h.$range.offset().left+"px"),h.cachePosition=e,h.value=e,h.onDrag(h)}}function i(e){return e.preventDefault(),h.attachEventListeners(document,"mousemove",a),h.attachEventListeners(document,"touchmove",a),h.attachEventListeners(document,"pointermove",a),h.attachEventListeners(document,"mouseup",n),h.attachEventListeners(document,"touchend",n),h.attachEventListeners(document,"pointerup",n),t(h.document).addClass("rms-select-disable"),h.isDown=!0,a(e),!1}function n(e){e.preventDefault(),t(h.document).removeClass("rms-select-disable"),h.removeEventListeners(document,"mousemove",a),h.removeEventListeners(document,"touchmove",a),h.removeEventListeners(document,"pointermove",a),h.removeEventListeners(document,"mouseup",n),h.removeEventListeners(document,"touchend",n),h.removeEventListeners(document,"pointerup",n),h.isDown=!1,h.onDragEnd(h)}function o(t){t.preventDefault(),h.initHandle()}function l(t){t.on("click",function(t){t.preventDefault(),h.$element.toggleClass("disabled"),h.isLocked=!h.isLocked,h.onLock()})}var h=this;this.id=s.id,this.document=document.documentElement,this.$element=t(e),this.$range=t("<div/>",{"class":"rms-slide-track"}),this.$fill=t("<span/>",{"class":"rms-slide-fill"}),this.$handle=t("<span/>",{"class":"rms-slide-handle "+s.handleClass}),this.$label=t(e).find("[data-rms-label]"),this.$range.append(this.$fill,this.$handle),this.$element.addClass("rms-slide").append(this.$range),this.isDown=!1,this.isDisabled=!1,this.isLocked=!1,this.onDrag=s.onDrag,this.onDragEnd=s.onDragEnd,this.onLock=s.onLock,this.step=s.step?s.step:1,this.minValue=s.minValue,this.maxValue=s.maxValue,this.value=s.value?s.value:this.minValue,this.totalValue=s.totalValue+this.maxValue,this.cachePosition=null,this.attachEventListeners(this.$range[0],"mousedown",i),this.attachEventListeners(this.$range[0],"touchstart",i),this.attachEventListeners(this.$range[0],"pointerdown",i),this.attachEventListeners(window,"resize",o),s.useLock&&(this.$lock=t("<span/>",{"class":"rms-slide-lock "+s.lockClass}),this.$element.append(this.$lock),l(this.$lock)),this.initHandle()}function a(t,e){var s=new Error(e);throw s.name=t,s}t.fn.MultiRangeSlider=function(s){var a=[];return t.each(this,function(i,n){t.data(n,"rms_x")||a.push(t.data(n,"rms_x",new e(n,s)))}),a.length>1?a:a[0]},e.prototype.getSlideSum=function(e){var s=0,a=0;return t.each(this.sliders,function(t,e){e.isLocked||(a+=Math.round(e.getValue()-e.minValue)),s+=Math.round(e.getValue()-e.minValue)}),e?a:s},e.prototype.reset=function(){t.each(this.sliders,function(t,e){e.reset()})},e.prototype.normalizeSlides=function(e){var s=[];t.each(this.sliders,function(t,a){!a.isDisabled&&a.getValue()>a.minValue&&a.id!==e.id&&!a.isLocked&&s.push(a)}),">"===this.mode?this.getSlideSum(!0)>this.maxValue&&this.updateSlides(Math.abs(this.getSlideSum(!0)-this.maxValue),s):this.getSlideSum(!0)!==this.maxValue&&this.updateSlides(Math.abs(this.getSlideSum(!0)-this.maxValue),s)},e.prototype.updateSlides=function(t,e){for(var s=e.length,a=t,i=Math.floor(a/s),n=a%s,o=0,l=[],h=0,r=s;r>h;h++){var u=n>h?1:0,d=e[h].getValue()-(i+u);d<e[h].minValue?(e[h].setValue(e[h].minValue,!1),o+=Math.abs(d-e[h].minValue)):(e[h].setValue(d,!1),l.push(e[h]))}o>0&&this.updateSlides(o,l)},s.prototype.initHandle=function(){this.cachePosition=Math.round(this.value*this.$range.outerWidth()/this.maxValue),this.$handle.css("left",Math.round(this.cachePosition-this.$handle.outerWidth()/2)+"px"),this.$fill.css("width",this.cachePosition+"px")},s.prototype.reset=function(){this.value=this.minValue,this.$element.removeClass("disabled"),this.isLocked=!1,this.cachePosition=Math.round(this.value*this.$range.outerWidth()/this.maxValue),this.$handle.css("left",Math.round(this.cachePosition-this.$handle.outerWidth()/2)+"px"),this.$fill.css("width",this.cachePosition+"px"),this.onDrag(this)},s.prototype.setValue=function(t,e){var s=this.maxValue>this.totalValue?this.totalValue:this.maxValue;return this.value=t,t>=s?this.value=s:t<=this.minValue&&(this.value=this.minValue),this.isLocked?console.log("Unable to change value, slide is locked."):(this.cachePosition=Math.round(this.value*this.$range.outerWidth()/this.maxValue),this.$handle.css("left",Math.round(this.cachePosition-this.$handle.outerWidth()/2)+"px"),this.$fill.css("width",this.cachePosition+"px"),this.$label.text(Math.round(this.value)),void(2!=arguments.length&&this.onDrag(this)))},s.prototype.getValue=function(){return this.value},s.prototype.attachEventListeners=function(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent&&t.attachEvent("on"+e,s)},s.prototype.removeEventListeners=function(t,e,s){t.removeEventListener?t.removeEventListener(e,s):t.detachEvent&&t.detachEvent("on"+e,s)},t.fn.MultiRangeSlider.defaults={rangeSelector:".slide",disabledClass:"disabled",fillClass:"rms-slide-fill",rangeClass:"rms-slide",handleClass:"",lockClass:"",useLock:!0,onInit:function(){},onDrag:function(){},onDragEnd:function(){}}}(jQuery);
//# sourceMappingURL=multi-range-slider.js.map
