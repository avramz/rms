!function(t){"use strict";function e(e,i){function n(t){h.onDragEnd&&"function"==typeof h.onDragEnd&&h.onDragEnd(t,h)}function o(t){t.$label.text(Math.round(t.value)),h.normalizeSlides(t),h.onDrag&&"function"==typeof h.onDrag&&h.onDrag(t,h)}function l(e){var s=0;return t(e).find(u.rangeSelector).each(function(){var e=t(this).attr("data-rms-min")||0;t(this).attr("data-rms-max")||a("Plugin Error","Max value missing for slider element"+this),parseInt(t(this).attr("data-rms-max"))-e>s&&(s=parseInt(t(this).attr("data-rms-max"))-e)}),s}function r(){var e=0;t.each(h.sliders,function(t,s){s.isLocked&&(e+=Math.abs(s.getValue()-s.minValue))}),h.maxValue=h.initialMax-e,t.each(h.sliders,function(t,e){e.isLocked||(e.totalValue=e.minValue+h.maxValue)})}var h=this,u=t.extend({},t.fn.MultiRangeSlider.defaults,i),d={};this.maxValue=l(e),this.initialMax=this.maxValue,t(e).find(u.rangeSelector).each(function(e){var a=t(this).attr("data-rms-name")||"slide-"+e;d[a]=new s(this,{id:a,value:parseFloat(t(this).attr("data-rms-value")),step:parseFloat(t(this).attr("data-rms-step")),minValue:parseFloat(t(this).attr("data-rms-min"))||0,maxValue:parseFloat(t(this).attr("data-rms-max")),totalValue:h.maxValue,disabledClass:u.disabledClass,fillClass:u.fillClass,rangeClass:u.rangeClass,handleClass:u.handleClass,lockClass:u.lockClass,useLock:u.useLock,onDrag:o,onDragEnd:n,onLock:r,sliders:d})}),this.sliders=d,this.onDrag=u.onDrag,this.onDragEnd=u.onDragEnd,this.onInit=u.onInit,this.onInit(h)}function s(e,s){function a(t){t=t||window.event;var e,s=t.pageX||t.touches[0].clientX,a=r.maxValue>r.totalValue?r.totalValue:r.maxValue;if(s||(s=!t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),e=Math.round((s-r.$range.offset().left)*r.maxValue/r.$range.outerWidth()),r.isDown){if(e>a)return void r.setValue(a);if(e<r.minValue)return void r.setValue(r.minValue);r.$handle.css("left",Math.round(s-r.$range.offset().left-r.$handle.outerWidth()/2)+"px"),r.$fill.css("width",s-r.$range.offset().left+"px"),r.cachePosition=e,r.value=e,r.onDrag(r)}}function i(e){return e.preventDefault(),r.attachEventListeners(document,"mousemove",a),r.attachEventListeners(document,"touchmove",a),r.attachEventListeners(document,"pointermove",a),r.attachEventListeners(document,"mouseup",n),r.attachEventListeners(document,"touchend",n),r.attachEventListeners(document,"pointerup",n),t(r.document).addClass("rms-select-disable"),r.isDown=!0,a(e),!1}function n(e){e.preventDefault(),t(r.document).removeClass("rms-select-disable"),r.removeEventListeners(document,"mousemove",a),r.removeEventListeners(document,"touchmove",a),r.removeEventListeners(document,"pointermove",a),r.removeEventListeners(document,"mouseup",n),r.removeEventListeners(document,"touchend",n),r.removeEventListeners(document,"pointerup",n),r.isDown=!1,r.onDragEnd(r)}function o(t){t.preventDefault(),r.initHandle()}function l(t){t.on("click",function(t){t.preventDefault(),r.$element.toggleClass("disabled"),r.isLocked=!r.isLocked,r.onLock()})}var r=this;this.id=s.id,this.document=document.documentElement,this.$element=t(e),this.$range=t("<div/>",{"class":"rms-slide-track"}),this.$fill=t("<span/>",{"class":"rms-slide-fill"}),this.$handle=t("<span/>",{"class":"rms-slide-handle "+s.handleClass}),this.$label=t(e).find("[data-rms-label]"),this.$range.append(this.$fill,this.$handle),this.$element.addClass("rms-slide").append(this.$range),this.isDown=!1,this.isDisabled=!1,this.isLocked=!1,this.onDrag=s.onDrag,this.onDragEnd=s.onDragEnd,this.onLock=s.onLock,this.step=s.step?s.step:1,this.minValue=s.minValue,this.maxValue=s.maxValue,this.value=s.value?s.value:this.minValue,this.totalValue=s.totalValue+this.maxValue,this.cachePosition=null,this.attachEventListeners(this.$range[0],"mousedown",i),this.attachEventListeners(this.$range[0],"touchstart",i),this.attachEventListeners(this.$range[0],"pointerdown",i),this.attachEventListeners(window,"resize",o),s.useLock&&(this.$lock=t("<span/>",{"class":"rms-slide-lock "+s.lockClass}),this.$element.append(this.$lock),l(this.$lock)),this.initHandle()}function a(t,e){var s=new Error(e);throw s.name=t,s}t.fn.MultiRangeSlider=function(s){var a=[];return t.each(this,function(i,n){t.data(n,"rms_x")||a.push(t.data(n,"rms_x",new e(n,s)))}),a.length>1?a:a[0]},e.prototype.getSlideSum=function(e){var s=0,a=0;return t.each(this.sliders,function(t,e){e.isLocked||(a+=Math.round(e.getValue()-e.minValue)),s+=Math.round(e.getValue()-e.minValue)}),e?a:s},e.prototype.reset=function(){t.each(this.sliders,function(t,e){e.reset()})},e.prototype.normalizeSlides=function(e){var s=[];t.each(this.sliders,function(t,a){!a.isDisabled&&a.getValue()>a.minValue&&a.id!==e.id&&!a.isLocked&&s.push(a)}),this.getSlideSum(!0)>this.maxValue&&this.updateSlides(Math.abs(this.getSlideSum(!0)-this.maxValue),s)},e.prototype.updateSlides=function(t,e){for(var s=e.length,a=t,i=Math.floor(a/s),n=a%s,o=0,l=[],r=0,h=s;h>r;r++){var u=n>r?1:0,d=e[r].getValue()-(i+u);d<e[r].minValue?(e[r].setValue(e[r].minValue,!1),o+=Math.abs(d-e[r].minValue)):(e[r].setValue(d,!1),l.push(e[r]))}o>0&&this.updateSlides(o,l)},s.prototype.initHandle=function(){this.cachePosition=Math.round(this.value*this.$range.outerWidth()/this.maxValue),this.$handle.css("left",Math.round(this.cachePosition-this.$handle.outerWidth()/2)+"px"),this.$fill.css("width",this.cachePosition+"px")},s.prototype.reset=function(){this.value=this.minValue,this.$element.removeClass("disabled"),this.isLocked=!1,this.cachePosition=Math.round(this.value*this.$range.outerWidth()/this.maxValue),this.$handle.css("left",Math.round(this.cachePosition-this.$handle.outerWidth()/2)+"px"),this.$fill.css("width",this.cachePosition+"px"),this.onDrag(this)},s.prototype.setValue=function(t,e){var s=this.maxValue>this.totalValue?this.totalValue:this.maxValue;return this.value=t,t>=s?this.value=s:t<=this.minValue&&(this.value=this.minValue),this.isLocked?console.log("Unable to change value, slide is locked."):(this.cachePosition=Math.round(this.value*this.$range.outerWidth()/this.maxValue),this.$handle.css("left",Math.round(this.cachePosition-this.$handle.outerWidth()/2)+"px"),this.$fill.css("width",this.cachePosition+"px"),this.$label.text(Math.round(this.value)),void(2!=arguments.length&&this.onDrag(this)))},s.prototype.getValue=function(){return this.value},s.prototype.attachEventListeners=function(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent&&t.attachEvent("on"+e,s)},s.prototype.removeEventListeners=function(t,e,s){t.removeEventListener?t.removeEventListener(e,s):t.detachEvent&&t.detachEvent("on"+e,s)},t.fn.MultiRangeSlider.defaults={rangeSelector:".slide",disabledClass:"disabled",fillClass:"rms-slide-fill",rangeClass:"rms-slide",handleClass:"",lockClass:"",useLock:!0,onInit:function(){},onDrag:function(){},onDragEnd:function(){}}}(jQuery);
//# sourceMappingURL=multi-range-slider.js.map
