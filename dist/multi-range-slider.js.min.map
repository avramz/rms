{"version":3,"sources":["multi-range-slider.js"],"names":["$","Plugin","element","options","_onDragEnd","_slider","me","onDragEnd","_updateSlides","$label","text","Math","round","value","normalizeSlides","onDrag","_getSlidesMaxValue","maxValue","find","opts","rangeSelector","each","min","this","attr","_error","parseInt","_updateMaxValues","totalLockSlidesAmount","sliders","i","__slider","isLocked","abs","getValue","minValue","initialMax","totalValue","extend","fn","MultiRangeSlider","defaults","sliderName","Slider","id","parseFloat","step","disabledClass","fillClass","rangeClass","handleClass","lockClass","useLock","onLock","onInit","config","_moveHandler","e","window","event","dragValue","pos","pageX","touches","clientX","max","document","body","scrollLeft","documentElement","$range","offset","left","outerWidth","isDown","setValue","$handle","css","$fill","cachePosition","_downHandler","preventDefault","attachEventListeners","_upHandler","addClass","removeClass","removeEventListeners","_resizeHandler","initHandle","_lockHandler","$element","on","toggleClass","class","append","isDisabled","$lock","errorName","errorMsg","err","Error","name","_inst","_plugin","data","push","length","prototype","getSlideSum","excludeLockedSlides","sum","unlockedSlideSum","reset","slidersToDistribute","updateSlides","amountToDistribute","slides","slideNum","amount","amountPerSlider","floor","leftover","amountLeftover","slideLeftover","extra","newSliderValue","val","console","log","arguments","callback","addEventListener","attachEvent","removeEventListener","detachEvent","jQuery"],"mappings":"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","file":"multi-range-slider.js","sourcesContent":["/**\r\n * jQuery plugin for multi range sliders.\r\n * @author: Avramz\r\n * @param options\r\n * @returns {$.fn}\r\n */\r\n;(function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Light jQuery plugin wrapper.\r\n     * @param options\r\n     * @returns {Array} $.fn.MultiRangeSlider\r\n     * @constructor\r\n     */\r\n    $.fn.MultiRangeSlider = function (options) {\r\n        var _inst = [];\r\n\r\n        $.each(this, function (i, _plugin) {\r\n            if (!$.data(_plugin, 'rms_x')) {\r\n                _inst.push($.data(_plugin, 'rms_x', new Plugin(_plugin, options)));\r\n            }\r\n        });\r\n\r\n        return _inst.length > 1 ? _inst : _inst[0];\r\n    };\r\n\r\n    /**\r\n     * Plugin core logic.\r\n     * @param element\r\n     * @param options\r\n     * @constructor\r\n     */\r\n    function Plugin(element, options) {\r\n        var me = this,\r\n            opts = $.extend({}, $.fn.MultiRangeSlider.defaults, options),\r\n            sliders = {};\r\n\r\n        this.maxValue = _getSlidesMaxValue(element);\r\n        this.initialMax = this.maxValue;\r\n\r\n        $(element).find(opts.rangeSelector).each(function (i) {\r\n            var sliderName = $(this).attr('data-rms-name') || 'slide-' + i;\r\n\r\n            sliders[sliderName] = new Slider(this, {\r\n                id: sliderName,\r\n                value: parseFloat($(this).attr('data-rms-value')),\r\n                step: parseFloat($(this).attr('data-rms-step')),\r\n                minValue: parseFloat($(this).attr('data-rms-min')) || 0,\r\n                maxValue: parseFloat($(this).attr('data-rms-max')),\r\n                totalValue: me.maxValue,\r\n                disabledClass: opts.disabledClass,\r\n                fillClass: opts.fillClass,\r\n                rangeClass: opts.rangeClass,\r\n                handleClass: opts.handleClass,\r\n                lockClass: opts.lockClass,\r\n                useLock: opts.useLock,\r\n                onDrag: _updateSlides,\r\n                onDragEnd: _onDragEnd,\r\n                onLock: _updateMaxValues,\r\n                sliders: sliders\r\n            });\r\n        });\r\n\r\n        //expose sliders for manipulation\r\n        this.sliders = sliders;\r\n        this.onDrag = opts.onDrag;\r\n        this.onDragEnd = opts.onDragEnd;\r\n        this.onInit = opts.onInit;\r\n        this.onInit(me);\r\n\r\n        /**\r\n         * Return slider as all sliders onDragEnd.\r\n         * @param _slider\r\n         * @private\r\n         */\r\n        function _onDragEnd(_slider) {\r\n            if (me.onDragEnd && typeof me.onDragEnd === 'function') {\r\n                me.onDragEnd(_slider, me);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle slide movement logic.\r\n         * @param _slider\r\n         * @private\r\n         */\r\n        function _updateSlides(_slider) {\r\n            _slider.$label.text(Math.round(_slider.value));\r\n            me.normalizeSlides(_slider);\r\n\r\n            if (me.onDrag && typeof me.onDrag === 'function') {\r\n                me.onDrag(_slider, me);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Return slide value without minimum.\r\n         * @param element\r\n         * @returns {number}\r\n         * @private\r\n         */\r\n        function _getSlidesMaxValue(element) {\r\n            var maxValue = 0;\r\n\r\n            $(element).find(opts.rangeSelector).each(function () {\r\n                var min = $(this).attr('data-rms-min') || 0;\r\n\r\n\r\n                if (!$(this).attr('data-rms-max')) {\r\n                    _error('Plugin Error', 'Max value missing for slider element' + this);\r\n                }\r\n\r\n                if (parseInt($(this).attr('data-rms-max')) - min > maxValue) {\r\n                    maxValue = parseInt($(this).attr('data-rms-max')) - min;\r\n                }\r\n            });\r\n\r\n            return maxValue;\r\n        }\r\n\r\n        /**\r\n         * Updates maxValues for each slide when a slide is locked.\r\n         * @private\r\n         */\r\n        function _updateMaxValues() {\r\n            var totalLockSlidesAmount = 0;\r\n\r\n            $.each(me.sliders, function (i, __slider) {\r\n                if (__slider.isLocked) {\r\n                    totalLockSlidesAmount += Math.abs(__slider.getValue() - __slider.minValue);\r\n                }\r\n            });\r\n\r\n            me.maxValue = me.initialMax - totalLockSlidesAmount;\r\n\r\n            $.each(me.sliders, function (i, __slider) {\r\n                if (!__slider.isLocked) {\r\n                    __slider.totalValue = __slider.minValue + me.maxValue;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Return total sliders sum.\r\n     * @param excludeLockedSlides\r\n     * @returns {number}\r\n     */\r\n    Plugin.prototype.getSlideSum = function (excludeLockedSlides) {\r\n        var sum = 0,\r\n            unlockedSlideSum = 0;\r\n\r\n        $.each(this.sliders, function (i, __slider) {\r\n            if (!__slider.isLocked) {\r\n                unlockedSlideSum += Math.round(__slider.getValue() - __slider.minValue);\r\n            }\r\n            sum += Math.round(__slider.getValue() - __slider.minValue);\r\n\r\n        });\r\n\r\n        return excludeLockedSlides ? unlockedSlideSum : sum;\r\n    };\r\n\r\n    /**\r\n     * Resets the slides.\r\n     * @public\r\n     */\r\n    Plugin.prototype.reset = function () {\r\n        $.each(this.sliders, function (i, __slider) {\r\n            __slider.reset();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Update other slides when other slide is being moved.\r\n     * @param _slider\r\n     * @public\r\n     */\r\n    Plugin.prototype.normalizeSlides = function (_slider) {\r\n        var slidersToDistribute = [];\r\n\r\n        $.each(this.sliders, function (i, __slider) {\r\n            if (!__slider.isDisabled && __slider.getValue() > __slider.minValue && __slider.id !== _slider.id && !__slider.isLocked) {\r\n                slidersToDistribute.push(__slider);\r\n            }\r\n        });\r\n\r\n        if (this.getSlideSum(true) > this.maxValue) {\r\n            this.updateSlides(Math.abs(this.getSlideSum(true) - this.maxValue), slidersToDistribute);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Update other slides when other slide is being moved.\r\n     * @param amountToDistribute\r\n     * @param slides\r\n     * @public\r\n     */\r\n    Plugin.prototype.updateSlides = function (amountToDistribute, slides) {\r\n        var slideNum = slides.length,\r\n            amount = amountToDistribute,\r\n            amountPerSlider = Math.floor(amount / slideNum),\r\n            leftover = amount % slideNum,\r\n            amountLeftover = 0,\r\n            slideLeftover = [];\r\n\r\n        for (var i = 0, max = slideNum; i < max; i++) {\r\n            var extra = i < leftover ? 1 : 0,\r\n                newSliderValue = slides[i].getValue() - (amountPerSlider + extra);\r\n\r\n            if (newSliderValue < slides[i].minValue) {\r\n                slides[i].setValue(slides[i].minValue, false);\r\n                amountLeftover += Math.abs(newSliderValue - slides[i].minValue);\r\n            }\r\n            else {\r\n                slides[i].setValue(newSliderValue, false);\r\n                slideLeftover.push(slides[i]);\r\n            }\r\n        }\r\n\r\n        if (amountLeftover > 0) {\r\n            this.updateSlides(amountLeftover, slideLeftover);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Slider core logic.\r\n     * @param element\r\n     * @param config\r\n     * @constructor\r\n     */\r\n    function Slider(element, config) {\r\n        var me = this;\r\n\r\n        this.id = config.id;\r\n\r\n        //Dom\r\n        this.document = document.documentElement;\r\n        this.$element = $(element);\r\n        this.$range = $('<div/>', {class: 'rms-slide-track'});\r\n        this.$fill = $('<span/>', {class: 'rms-slide-fill'});\r\n        this.$handle = $('<span/>', {class: 'rms-slide-handle ' + config.handleClass});\r\n        this.$label = $(element).find('[data-rms-label]');\r\n\r\n        //insert into DOM\r\n        this.$range.append(this.$fill, this.$handle);\r\n        this.$element.addClass('rms-slide').append(this.$range);\r\n\r\n        this.isDown = false; //is mouse down in progress\r\n        this.isDisabled = false; //is mouse down in progress\r\n        this.isLocked = false; //is slider locked\r\n\r\n        // expose properties\r\n        this.onDrag = config.onDrag;\r\n        this.onDragEnd = config.onDragEnd;\r\n        this.onLock = config.onLock;\r\n        this.step = config.step ? config.step : 1;\r\n        this.minValue = config.minValue;\r\n        this.maxValue = config.maxValue;\r\n        this.value = config.value ? config.value : this.minValue;\r\n        this.totalValue = config.totalValue + this.maxValue;\r\n        this.cachePosition = null;\r\n\r\n        // attach mouse down listeners\r\n        this.attachEventListeners(this.$range[0], 'mousedown', _downHandler);\r\n        this.attachEventListeners(this.$range[0], 'touchstart', _downHandler);\r\n        this.attachEventListeners(this.$range[0], 'pointerdown', _downHandler);\r\n\r\n        this.attachEventListeners(window, 'resize', _resizeHandler);\r\n\r\n        if (config.useLock) {\r\n            this.$lock = $('<span/>', {class: 'rms-slide-lock ' + config.lockClass});\r\n            this.$element.append(this.$lock);\r\n            _lockHandler(this.$lock);\r\n        }\r\n\r\n        /**\r\n         * Handle movement.\r\n         * @param e\r\n         * @private\r\n         */\r\n        function _moveHandler(e) {\r\n            e = e || window.event;\r\n\r\n            var pos = e.pageX || e.touches[0].clientX,\r\n                dragValue,\r\n                max = me.maxValue > me.totalValue ? me.totalValue : me.maxValue;\r\n\r\n            if (!pos) {\r\n                pos = !e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            }\r\n\r\n            dragValue = Math.round(((pos - me.$range.offset().left) * me.maxValue / me.$range.outerWidth()));\r\n\r\n            if (me.isDown) {\r\n                if (dragValue > max) {\r\n                    me.setValue(max);\r\n                    return;\r\n                }\r\n                else if (dragValue < me.minValue) {\r\n                    me.setValue(me.minValue);\r\n                    return;\r\n                }\r\n\r\n                me.$handle.css('left', Math.round((pos - me.$range.offset().left - (me.$handle.outerWidth() / 2))) + 'px');\r\n                me.$fill.css('width', (pos - me.$range.offset().left) + 'px');\r\n                me.cachePosition = dragValue;\r\n                me.value = dragValue;\r\n                me.onDrag(me);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle mouse down. Add move/up listeners only when this handler is active, increasing performance by removing them on @upHandler.\r\n         * @param e\r\n         * @returns {boolean}\r\n         * @private\r\n         */\r\n        function _downHandler(e) {\r\n            e.preventDefault();\r\n            // attach move listeners while move is active\r\n            me.attachEventListeners(document, 'mousemove', _moveHandler);\r\n            me.attachEventListeners(document, 'touchmove', _moveHandler);\r\n            me.attachEventListeners(document, 'pointermove', _moveHandler);\r\n\r\n            me.attachEventListeners(document, 'mouseup', _upHandler);\r\n            me.attachEventListeners(document, 'touchend', _upHandler);\r\n            me.attachEventListeners(document, 'pointerup', _upHandler);\r\n\r\n\r\n            $(me.document).addClass('rms-select-disable');\r\n            me.isDown = true;\r\n            _moveHandler(e);\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Handle mouse up.\r\n         * @param e\r\n         * @private\r\n         */\r\n        function _upHandler(e) {\r\n            e.preventDefault();\r\n            $(me.document).removeClass('rms-select-disable');\r\n\r\n            //remove move listeners\r\n            me.removeEventListeners(document, 'mousemove', _moveHandler);\r\n            me.removeEventListeners(document, 'touchmove', _moveHandler);\r\n            me.removeEventListeners(document, 'pointermove', _moveHandler);\r\n\r\n            me.removeEventListeners(document, 'mouseup', _upHandler);\r\n            me.removeEventListeners(document, 'touchend', _upHandler);\r\n            me.removeEventListeners(document, 'pointerup', _upHandler);\r\n            me.isDown = false;\r\n            me.onDragEnd(me);\r\n        }\r\n\r\n        /**\r\n         * Handle window resize.\r\n         * @param e\r\n         * @private\r\n         */\r\n        function _resizeHandler(e) {\r\n            e.preventDefault();\r\n            me.initHandle();\r\n        }\r\n\r\n        /**\r\n         * Handles slide lock.\r\n         * @param $element\r\n         * @private\r\n         */\r\n        function _lockHandler($element) {\r\n            $element.on('click', function (e) {\r\n                e.preventDefault();\r\n                me.$element.toggleClass('disabled');\r\n                me.isLocked = !me.isLocked;\r\n                me.onLock();\r\n            });\r\n        }\r\n\r\n        //initialize the slider.\r\n        this.initHandle();\r\n    }\r\n\r\n    /**\r\n     * Initialize the slider.\r\n     * @public\r\n     */\r\n    Slider.prototype.initHandle = function () {\r\n        this.cachePosition = Math.round((this.value * this.$range.outerWidth()) / this.maxValue);\r\n        this.$handle.css('left', Math.round((this.cachePosition - (this.$handle.outerWidth() / 2))) + 'px');\r\n        this.$fill.css('width', this.cachePosition + 'px');\r\n//        this.onDrag(this);\r\n    };\r\n\r\n    /**\r\n     * Reset the slider.\r\n     * @public\r\n     */\r\n    Slider.prototype.reset = function () {\r\n        this.value = this.minValue;\r\n        this.$element.removeClass('disabled');\r\n        this.isLocked = false;\r\n        this.cachePosition = Math.round((this.value * this.$range.outerWidth()) / this.maxValue);\r\n        this.$handle.css('left', Math.round((this.cachePosition - (this.$handle.outerWidth() / 2))) + 'px');\r\n        this.$fill.css('width', this.cachePosition + 'px');\r\n        this.onDrag(this);\r\n    };\r\n\r\n    /**\r\n     * Set value for the given slider.\r\n     * @param val\r\n     * @param updateSlides\r\n     * @public\r\n     */\r\n    Slider.prototype.setValue = function (val, updateSlides) {\r\n        var max = this.maxValue > this.totalValue ? this.totalValue : this.maxValue;\r\n        this.value = val;\r\n\r\n        if (val >= max) {\r\n            this.value = max;\r\n        }\r\n        else if (val <= this.minValue) {\r\n            this.value = this.minValue;\r\n        }\r\n\r\n        if (this.isLocked) {\r\n            return console.log('Unable to change value, slide is locked.');\r\n        }\r\n\r\n        this.cachePosition = Math.round((this.value * this.$range.outerWidth()) / this.maxValue);\r\n        this.$handle.css('left', Math.round((this.cachePosition - (this.$handle.outerWidth() / 2))) + 'px');\r\n        this.$fill.css('width', this.cachePosition + 'px');\r\n        this.$label.text(Math.round(this.value));\r\n\r\n        if (arguments.length != 2) {\r\n            this.onDrag(this);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get slider value\r\n     * @returns {*}\r\n     * @public\r\n     */\r\n    Slider.prototype.getValue = function () {\r\n        return this.value;\r\n    };\r\n\r\n    /**\r\n     * Attach event listeners.\r\n     * @param element\r\n     * @param event\r\n     * @param callback\r\n     * @public\r\n     */\r\n    Slider.prototype.attachEventListeners = function (element, event, callback) {\r\n        if (element.addEventListener) {\r\n            element.addEventListener(event, callback, false);\r\n        } else if (element.attachEvent) {\r\n            element.attachEvent('on' + event, callback);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Remove event listeners.\r\n     * @param element\r\n     * @param event\r\n     * @param callback\r\n     * @public\r\n     */\r\n    Slider.prototype.removeEventListeners = function (element, event, callback) {\r\n        if (element.removeEventListener) {\r\n            element.removeEventListener(event, callback);\r\n        } else if (element.detachEvent) {\r\n            element.detachEvent('on' + event, callback);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Custom error handler\r\n     * @param errorName\r\n     * @param errorMsg\r\n     * @private\r\n     */\r\n    function _error(errorName, errorMsg) {\r\n        var err = new Error(errorMsg);\r\n        err.name = errorName;\r\n\r\n        throw err;\r\n    }\r\n\r\n    /**\r\n     * Plugin defaults.\r\n     * @type {{rangeSelector: string, disabledClass: string, fillClass: string, rangeClass: string, handleClass: string, lockClass: string, useLock: boolean, onInit: onInit, onDrag: onDrag}}\r\n     */\r\n\r\n\r\n    $.fn.MultiRangeSlider.defaults = {\r\n        rangeSelector: '.slide',\r\n        disabledClass: 'disabled',\r\n        fillClass: 'rms-slide-fill',\r\n        rangeClass: 'rms-slide',\r\n        handleClass: '',\r\n        lockClass: '',\r\n        useLock: true,\r\n        onInit: function () {\r\n        },\r\n        onDrag: function () {\r\n        },\r\n        onDragEnd: function () {\r\n        }\r\n    };\r\n\r\n}(jQuery));"],"sourceRoot":"/source/"}